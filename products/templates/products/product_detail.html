{% extends "base.html" %}
{% load static %}

{% block page_header %}

{% endblock %}

{% block content %}
<div class="hero-body">

    <div class="columns">
        <div class="column">
            <h1 class="title-heading has-text-centered ">Products</h1>
        </div>
    </div>

    <div class="columns box  is-justify-content-center">
        <div class="column box is-one-third">
            <div class="image">
                {% if product.image %}
                <a href="{{ product.image.url }}" target="_blank">
                    <div class="card-image">
                        <figure class="image is-5by4">
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image"
                                target="_blank">
                        </figure>
                    </div>
                </a>
                {% else %}
                <a href="{{ product.image.url }}" target="_blank">
                    <div class="card-image">
                        <figure class="image">
                            <img src="{{ MEDIA_URL }}knitting.png" alt="{{ product.name }}" target="_blank">
                        </figure>
                    </div>
                </a>
                {% endif %}
            </div>
        </div>
        <div class="column is-one-third">
            <table>
                <tr>
                    <td>Name: {{ product.name }}</td>
                </tr>
                <tr>
                    <td>Price: Â£{{ product.price }}</td>

                    {% if product.rating %}
                <tr>
                    <td>Rating: {{ product.rating }}</td>
                </tr>
                {% else %}
                <tr>
                    <td>No Rating</td>
                </tr>
                {% endif %}

                <tr>
                    <td>Colour: {{ product.colour }}</td>
                </tr>
                <tr>
                    <td>Description: {{ product.description }}</td>
                </tr>
                <tr>
                    <td>{% if product.category %}
                        <a href="{% url 'products' %}?category={{ product.category.name }}">
                            <i class="fas fa-circle is-grey mx-1"></i>{{ product.category.friendly_name }}
                        </a>
                        {% endif %}</td>
                </tr>
            </table>
            <!-- form for quantity of items to add to bag  -->
            <form action="{% url 'add_to_bag' product.id %}" method="POST">
                {% csrf_token %}
                <label class="label" for="quantity">Qty:</label>
                <div class="columns">
                    <div class="column is-6">
                        <div class="field">
                            <div class="control">
                                <input class="input" type="number" name="quantity" value="1" min="1" max="99"
                                    data-item_id="{{ product.id }}" id="id_qty_{{ product.id }}"
                                    placeholder="Text input">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="columns">
                    <div class="field column">
                        <div class="control">
                            <button class="button is-danger">Add to bag</button>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div> <!-- back to products  -->
    <div class="columns">
        <div class="column has-text-centered">
            <a href="{% url 'products' %}" class="button is-danger">
                <i class="fas fa-angle-left mr-1"></i>Keep Shopping
            </a>
        </div>
    </div>
    <!-- end of back to products  -->
</div>

{% endblock %}